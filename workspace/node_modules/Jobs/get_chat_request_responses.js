const assert = require("assert");

function getChatResponses(db, post, callback)
{
    var finder={};
    finder['customer']=post[GLOBAL.userName];
    //console.log(post);
    db.collection('chatRequestResponses').findOne(finder,function(err,result)
    {
        assert.equal(null, err);
        if(result==null)
        {
            db.close();
            return callback("no responses found "+post[GLOBAL.userName]);
        }
        else if(typeof result['chatRequestResponses']=='undefined')
        {
            db.close();
            return callback("no responses found "+post[GLOBAL.userName]);
        }
        else
        {
            db.close();
            return callback(JSON.stringify(result['chatRequestResponses']));
        }
    });
}

module.exports = getChatResponses;