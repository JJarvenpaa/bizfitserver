//By jarij 
//last time modificated: 7.3.17
const assert = require("assert");
function load(db, post,callback) 
{
        var object;
        var finder={};
        finder[GLOBAL.userName]=post[GLOBAL.userName];
        db.collection('user').findOne(finder, function(err, user)
        {
            assert.equal(err, null);
            if (user != null) 
            {
                if(post["checkSum"]!=user["checkSum"]){
                    object = JSON.stringify(user);
                    
                }else
                {
                    //object = JSON.stringify(jotain);
                }
                db.close();
                 
                if(typeof object != 'undefined')
                {
                    return callback(object);
                }
                else
                {
                    return callback("user not found");
                }
                
                
               
            }else
            {
                return callback("user not found");
            }
    
    
        });
      
}

module.exports= load